<!DOCTYPE html>
<html>
<head>
	<title>iSTS Test App</title>
</head>
<body>
	<style type="text/css">
		input{
			width: 80%;
			padding: 5px;
			font-size: 1.1em;
		}
		textarea{
			font-size: 1.1em;
			padding: 5px;
		}
	</style>
	<div>
		<div>
			<div>Kalimat pertama</div>
			<input type="text" id="s1" name="ists1" value="Dia diduga melecehkan anggota TNI dalam siaran langsung Dahsyat RCTI" /><br/>
		</div>
		<br/>
		<div>
			<button id="submit">Submit</button> <br/>
		</div>
		<br/>
		<br/>
		<textarea id="hasil" style="width: 100%; height: 400px;"></textarea>
	</div>
	<script type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$('#submit').click(function(e){
				e.preventDefault();
				$(this).text("sedang diproses...");
				$(this).prop('disabled', true);
				var scopeThis = $(this);
				$.ajax({
					type: "POST",
					url: "http://rio.southeastasia.cloudapp.azure.com:5001/chunk",
					// The key needs to match your method's input parameter (case-sensitive).
					data: JSON.stringify({
						"kalimat": $('#s1').val()
					}),
					contentType: "application/json; charset=utf-8",
					dataType: "json",
					success: function(data){
						console.log(data);
						$('#hasil').val("");
						data.forEach(function(line){
							$('#hasil').val($('#hasil').val() + line + '\n');
						});
						scopeThis.prop('disabled', false);
						scopeThis.text("Submit");
					},
					failure: function(errMsg) {
						console.log(errMsg);
					}
				});
			});
			
		});
	</script>
</body>
</html>